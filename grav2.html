<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simulador de Gravita√ß√£o Universal</title>
  <style>
    :root {
      --bg: #071028;
      --card: #0f1724;
      --muted: #94a3b8;
      --primary: #8a2be2;
      --accent: #00bfff;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      color-scheme: dark;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      transition: all 0.3s ease;
    }

    body {
      font-family: system-ui, 'Segoe UI', Roboto, Arial;
      background: linear-gradient(180deg, #071028 0%, #071021 60%);
      color: #e6eef8;
      min-height: 100vh;
      overflow-x: hidden;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      margin-bottom: 30px;
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      background: linear-gradient(to right, var(--primary), var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .subtitle {
      color: var(--muted);
      font-size: 1.2rem;
    }

    .simulator-container {
      display: grid;
      grid-template-columns: 1fr 350px;
      gap: 20px;
      margin-bottom: 30px;
    }

    .simulation-area {
      background: var(--card);
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 6px 30px rgba(2, 6, 23, 0.6);
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .simulation-area::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(138, 43, 226, 0.05) 0%, transparent 70%);
      animation: rotate 20s linear infinite;
      pointer-events: none;
    }

    #gravityCanvas {
      width: 100%;
      flex: 1;
      border-radius: 8px;
      background: #0b0b2d;
      display: block;
    }

    .controls {
      background: var(--card);
      padding: 20px;
      border-radius: 12px;
      height: fit-content;
    }

    .body-selection {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 20px;
    }

    .body-card {
      background: rgba(0, 0, 0, 0.2);
      border-radius: 8px;
      padding: 15px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }

    .body-card:hover {
      transform: translateY(-5px);
      background: rgba(0, 0, 0, 0.3);
    }

    .body-card.selected {
      border-color: var(--primary);
      box-shadow: 0 0 15px rgba(138, 43, 226, 0.5);
    }

    .body-image {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      margin: 0 auto 10px;
      border: 2px solid var(--primary);
    }

    .body-name {
      font-weight: bold;
      color: var(--accent);
      margin-bottom: 5px;
    }

    .body-details {
      font-size: 12px;
      color: var(--muted);
    }

    .control-group {
      margin-bottom: 20px;
    }

    .control-group h3 {
      color: var(--accent);
      margin-bottom: 10px;
      font-size: 1.2rem;
    }

    label {
      display: block;
      margin-bottom: 8px;
      color: var(--muted);
    }

    input[type='range'] {
      width: 100%;
      height: 6px;
      border-radius: 3px;
      background: rgba(255, 255, 255, 0.1);
      outline: none;
      -webkit-appearance: none;
      margin-bottom: 10px;
    }

    input[type='range']::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: var(--primary);
      cursor: pointer;
      box-shadow: 0 0 5px rgba(138, 43, 226, 0.5);
    }

    input[type='number'] {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      background: rgba(255, 255, 255, 0.05);
      color: white;
      margin-bottom: 10px;
    }

    .value-display {
      text-align: center;
      font-size: 14px;
      color: var(--muted);
      margin-top: 5px;
    }

    .info-panel {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-top: 20px;
    }

    .info-card {
      background: rgba(0, 0, 0, 0.2);
      border-radius: 8px;
      padding: 15px;
      text-align: center;
      border-left: 3px solid var(--primary);
    }

    .info-card:nth-child(2) {
      border-left-color: var(--accent);
    }

    .info-card:nth-child(3) {
      border-left-color: var(--success);
    }

    .info-card .label {
      font-size: 0.9rem;
      color: var(--muted);
      margin-bottom: 8px;
    }

    .info-card .value {
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--accent);
    }

    .warning {
      color: var(--warning);
      font-weight: bold;
      margin-top: 10px;
      text-align: center;
      animation: pulse 2s infinite;
    }

    .danger {
      color: var(--danger);
      font-weight: bold;
      margin-top: 10px;
      text-align: center;
      animation: pulse 0.5s infinite;
    }

    .explanation {
      background: var(--card);
      border-radius: 12px;
      padding: 25px;
      margin-top: 30px;
    }

    .explanation h2 {
      color: var(--accent);
      margin-bottom: 15px;
      font-size: 1.8rem;
    }

    .explanation p {
      margin-bottom: 15px;
      line-height: 1.6;
    }

    .formula {
      background: rgba(0, 0, 0, 0.3);
      padding: 15px;
      border-radius: 8px;
      margin: 20px 0;
      font-family: monospace;
      text-align: center;
      border-left: 3px solid var(--accent);
      font-size: 1.2rem;
    }

    .custom-body-controls {
      background: rgba(0, 0, 0, 0.2);
      border-radius: 8px;
      padding: 15px;
      margin-top: 10px;
    }

    @keyframes rotate {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(360deg);
      }
    }

    @keyframes pulse {
      0% {
        opacity: 1;
      }
      50% {
        opacity: 0.7;
      }
      100% {
        opacity: 1;
      }
    }

    @keyframes explode {
      0% {
        transform: scale(1);
        opacity: 1;
      }
      100% {
        transform: scale(3);
        opacity: 0;
      }
    }

    @media (max-width: 900px) {
      .simulator-container {
        grid-template-columns: 1fr;
      }
      
      .body-selection {
        grid-template-columns: 1fr;
      }
      
      .info-panel {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Simulador de Gravita√ß√£o Universal</h1>
      <p class="subtitle">Visualize a for√ßa gravitacional entre corpos celestes</p>
    </header>

    <div class="simulator-container">
      <div class="simulation-area">
        <canvas id="gravityCanvas"></canvas>
        
        <div class="info-panel">
          <div class="info-card">
            <div class="label">For√ßa Gravitacional</div>
            <div class="value" id="force-value">0.00 N</div>
          </div>
          <div class="info-card">
            <div class="label">Dist√¢ncia</div>
            <div class="value" id="distance-value">0 km</div>
          </div>
          <div class="info-card">
            <div class="label">Status</div>
            <div class="value" id="status-value">Est√°vel</div>
          </div>
        </div>
        
        <div id="collision-warning" class="warning" style="display: none;">
          ‚ö†Ô∏è Dist√¢ncia muito pequena! Aumente a dist√¢ncia para evitar colis√£o.
        </div>
      </div>

      <div class="controls">
        <div class="control-group">
          <h3>Corpo 1</h3>
          <div class="body-selection">
            <div class="body-card selected" data-body="sun" data-target="1">
              <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b4/The_Sun_by_the_Atmospheric_Imaging_Assembly_of_NASA%27s_Solar_Dynamics_Observatory_-_20100819.jpg/300px-The_Sun_by_the_Atmospheric_Imaging_Assembly_of_NASA%27s_Solar_Dynamics_Observatory_-_20100819.jpg" alt="Sol" class="body-image">
              <div class="body-name">Sol</div>
              <div class="body-details">Massa: 1.989 √ó 10¬≥‚Å∞ kg</div>
            </div>
            <div class="body-card" data-body="earth" data-target="1">
              <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/97/The_Earth_seen_from_Apollo_17.jpg/300px-The_Earth_seen_from_Apollo_17.jpg" alt="Terra" class="body-image">
              <div class="body-name">Terra</div>
              <div class="body-details">Massa: 5.972 √ó 10¬≤‚Å¥ kg</div>
            </div>
            <div class="body-card" data-body="jupiter" data-target="1">
              <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2b/Jupiter_and_its_shrunken_Great_Red_Spot.jpg/300px-Jupiter_and_its_shrunken_Great_Red_Spot.jpg" alt="J√∫piter" class="body-image">
              <div class="body-name">J√∫piter</div>
              <div class="body-details">Massa: 1.898 √ó 10¬≤‚Å∑ kg</div>
            </div>
            <div class="body-card" data-body="custom" data-target="1">
              <div class="body-image" style="background: #666; display: flex; align-items: center; justify-content: center; font-size: 24px;">?</div>
              <div class="body-name">Personalizado</div>
              <div class="body-details">Defina sua pr√≥pria massa</div>
            </div>
          </div>
          
          <div class="custom-body-controls" id="custom-controls-1" style="display: none;">
            <label>Massa do Corpo 1 (kg)</label>
            <input type="number" id="custom-mass-1" value="5.972e24" step="1e22">
          </div>
        </div>

        <div class="control-group">
          <h3>Corpo 2</h3>
          <div class="body-selection">
            <div class="body-card" data-body="sun" data-target="2">
              <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b4/The_Sun_by_the_Atmospheric_Imaging_Assembly_of_NASA%27s_Solar_Dynamics_Observator_-_20100819.jpg/300px-The_Sun_by_the_Atmospheric_Imaging_Assembly_of_NASA%27s_Solar_Dynamics_Observator_-_20100819.jpg" alt="Sol" class="body-image">
              <div class="body-name">Sol</div>
              <div class="body-details">Massa: 1.989 √ó 10¬≥‚Å∞ kg</div>
            </div>
            <div class="body-card selected" data-body="earth" data-target="2">
              <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/97/The_Earth_seen_from_Apollo_17.jpg/300px-The_Earth_seen_from_Apollo_17.jpg" alt="Terra" class="body-image">
              <div class="body-name">Terra</div>
              <div class="body-details">Massa: 5.972 √ó 10¬≤‚Å¥ kg</div>
            </div>
            <div class="body-card" data-body="moon" data-target="2">
              <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/FullMoon2010.jpg/300px-FullMoon2010.jpg" alt="Lua" class="body-image">
              <div class="body-name">Lua</div>
              <div class="body-details">Massa: 7.342 √ó 10¬≤¬≤ kg</div>
            </div>
            <div class="body-card" data-body="custom" data-target="2">
              <div class="body-image" style="background: #666; display: flex; align-items: center; justify-content: center; font-size: 24px;">?</div>
              <div class="body-name">Personalizado</div>
              <div class="body-details">Defina sua pr√≥pria massa</div>
            </div>
          </div>
          
          <div class="custom-body-controls" id="custom-controls-2" style="display: none;">
            <label>Massa do Corpo 2 (kg)</label>
            <input type="number" id="custom-mass-2" value="7.342e22" step="1e20">
          </div>
        </div>

        <div class="control-group">
          <h3>Configura√ß√µes do Sistema</h3>
          <label>Dist√¢ncia entre os corpos (km)</label>
          <input id="distanceInput" type="range" min="1000" max="10000000" step="1000" value="384400">
          <div class="value-display" id="distance-display">384.400 km</div>
          <div class="value-display" id="min-distance-display">Dist√¢ncia m√≠nima: 0 km</div>
        </div>

        <div class="control-group">
          <h3>Visualiza√ß√£o</h3>
          <label><input id="showForceVector" type="checkbox" checked> Mostrar vetor de for√ßa</label>
          <label><input id="animateForce" type="checkbox" checked> Animar for√ßa gravitacional</label>
        </div>
      </div>
    </div>

    <div class="explanation">
      <h2>Lei da Gravita√ß√£o Universal</h2>
      <p>A Lei da Gravita√ß√£o Universal, formulada por Isaac Newton, estabelece que dois corpos quaisquer se atraem gravitacionalmente por meio de uma for√ßa que √© diretamente proporcional ao produto de suas massas e inversamente proporcional ao quadrado da dist√¢ncia que os separa.</p>
      
      <div class="formula">
        F = G √ó (m‚ÇÅ √ó m‚ÇÇ) / r¬≤
      </div>
      
      <p>Onde:</p>
      <ul>
        <li><strong>F</strong> √© a for√ßa gravitacional entre os dois corpos (em Newtons)</li>
        <li><strong>G</strong> √© a constante gravitacional (6,67430 √ó 10‚Åª¬π¬π N¬∑m¬≤/kg¬≤)</li>
        <li><strong>m‚ÇÅ e m‚ÇÇ</strong> s√£o as massas dos dois corpos (em kg)</li>
        <li><strong>r</strong> √© a dist√¢ncia entre os centros dos dois corpos (em metros)</li>
      </ul>
      
      <p>Este simulador permite visualizar essa for√ßa entre diferentes corpos celestes. Ajuste a dist√¢ncia entre os corpos e observe como a for√ßa gravitacional muda. Voc√™ tamb√©m pode criar corpos personalizados com massas espec√≠ficas.</p>
      <p><strong>Importante:</strong> Os corpos precisam manter uma dist√¢ncia m√≠nima para evitar colis√£o. Se a dist√¢ncia for muito pequena, os corpos colidir√£o e explodir√£o!</p>
    </div>
  </div>

  <script>
    // Constantes
    const G = 6.67430e-11; // Constante gravitacional

    // Elementos do DOM
    const canvas = document.getElementById('gravityCanvas');
    const ctx = canvas.getContext('2d');
    const distanceInput = document.getElementById('distanceInput');
    const distanceDisplay = document.getElementById('distance-display');
    const minDistanceDisplay = document.getElementById('min-distance-display');
    const showForceVector = document.getElementById('showForceVector');
    const animateForce = document.getElementById('animateForce');
    const forceValue = document.getElementById('force-value');
    const distanceValue = document.getElementById('distance-value');
    const statusValue = document.getElementById('status-value');
    const collisionWarning = document.getElementById('collision-warning');
    const customMass1 = document.getElementById('custom-mass-1');
    const customMass2 = document.getElementById('custom-mass-2');
    const customControls1 = document.getElementById('custom-controls-1');
    const customControls2 = document.getElementById('custom-controls-2');

    // Dados dos corpos celestes
    const celestialBodies = {
      sun: { 
        name: 'Sol', 
        mass: 1.989e30, 
        radius: 696340, 
        color: '#FFA500',
        image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/b/b4/The_Sun_by_the_Atmospheric_Imaging_Assembly_of_NASA%27s_Solar_Dynamics_Observatory_-_20100819.jpg/300px-The_Sun_by_the_Atmospheric_Imaging_Assembly_of_NASA%27s_Solar_Dynamics_Observatory_-_20100819.jpg'
      },
      earth: { 
        name: 'Terra', 
        mass: 5.972e24, 
        radius: 6371, 
        color: '#3498db',
        image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/9/97/The_Earth_seen_from_Apollo_17.jpg/300px-The_Earth_seen_from_Apollo_17.jpg'
      },
      jupiter: { 
        name: 'J√∫piter', 
        mass: 1.898e27, 
        radius: 69911, 
        color: '#e67e22',
        image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/2/2b/Jupiter_and_its_shrunken_Great_Red_Spot.jpg/300px-Jupiter_and_its_shrunken_Great_Red_Spot.jpg'
      },
      moon: { 
        name: 'Lua', 
        mass: 7.342e22, 
        radius: 1737, 
        color: '#bdc3c7',
        image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/FullMoon2010.jpg/300px-FullMoon2010.jpg'
      },
      custom: {
        name: 'Personalizado',
        mass: 5.972e24,
        radius: 6371,
        color: '#9b59b6',
        image: null
      }
    };

    // Estado da simula√ß√£o
    let selectedBody1 = 'sun';
    let selectedBody2 = 'earth';
    let distance = parseFloat(distanceInput.value); // em km
    let animationFrameId = null;
    let forceAnimation = 0;
    let minDistance = 0;
    let explosion = null;
    let explosionProgress = 0;

    // Corpos da simula√ß√£o
    let body1, body2;

    // Inicializar corpos
    function initializeBodies() {
      const body1Data = celestialBodies[selectedBody1];
      const body2Data = celestialBodies[selectedBody2];
      
      // Se for corpo personalizado, usar a massa personalizada
      if (selectedBody1 === 'custom') {
        body1Data.mass = parseFloat(customMass1.value);
      }
      if (selectedBody2 === 'custom') {
        body2Data.mass = parseFloat(customMass2.value);
      }
      
      // Calcular dist√¢ncia m√≠nima (soma dos raios + 10%)
      minDistance = (body1Data.radius + body2Data.radius) * 1.1;
      minDistanceDisplay.textContent = `Dist√¢ncia m√≠nima: ${minDistance.toLocaleString('pt-BR')} km`;
      
      // Ajustar dist√¢ncia se for menor que a m√≠nima
      if (distance < minDistance) {
        distance = minDistance;
        distanceInput.value = distance;
        distanceDisplay.textContent = distance.toLocaleString('pt-BR') + ' km';
      }
      
      // Escala para visualiza√ß√£o
      const scale = 1 / 50000; // 1 pixel = 50.000 km
      
      // Calcular posi√ß√µes iniciais
      const centerX = canvas.width / 2;
      const centerY = canvas.height / 2;
      
      // Corpo 1 (lado esquerdo)
      body1 = {
        name: body1Data.name,
        mass: body1Data.mass,
        radius: body1Data.radius,
        color: body1Data.color,
        image: body1Data.image,
        x: centerX - distance * scale / 2,
        y: centerY
      };
      
      // Corpo 2 (lado direito)
      body2 = {
        name: body2Data.name,
        mass: body2Data.mass,
        radius: body2Data.radius,
        color: body2Data.color,
        image: body2Data.image,
        x: centerX + distance * scale / 2,
        y: centerY
      };
      
      // Resetar explos√£o
      explosion = null;
      explosionProgress = 0;
      statusValue.textContent = "Est√°vel";
      statusValue.style.color = "";
      collisionWarning.style.display = "none";
    }

    // Verificar se h√° colis√£o
    function checkCollision() {
      const distanceMeters = distance * 1000; // converter para metros
      const minDistanceMeters = minDistance * 1000; // converter para metros
      
      if (distanceMeters < minDistanceMeters) {
        return true;
      }
      
      // Mostrar aviso se estiver pr√≥ximo da colis√£o
      if (distanceMeters < minDistanceMeters * 1.5) {
        collisionWarning.style.display = "block";
        statusValue.textContent = "‚ö†Ô∏è CUIDADO!";
        statusValue.style.color = "var(--warning)";
      } else {
        collisionWarning.style.display = "none";
        statusValue.textContent = "Est√°vel";
        statusValue.style.color = "";
      }
      
      return false;
    }

    // Iniciar explos√£o
    function startExplosion() {
      explosion = {
        x: (body1.x + body2.x) / 2,
        y: (body1.y + body2.y) / 2,
        radius: 0,
        maxRadius: Math.max(
          Math.sqrt(body1.mass) / 1e12,
          Math.sqrt(body2.mass) / 1e12
        ) * 3,
        particles: []
      };
      
      // Criar part√≠culas para a explos√£o
      for (let i = 0; i < 100; i++) {
        const angle = Math.random() * Math.PI * 2;
        const speed = 2 + Math.random() * 5;
        explosion.particles.push({
          x: explosion.x,
          y: explosion.y,
          vx: Math.cos(angle) * speed,
          vy: Math.sin(angle) * speed,
          life: 1,
          decay: 0.02 + Math.random() * 0.03,
          size: 1 + Math.random() * 3,
          color: i < 50 ? body1.color : body2.color
        });
      }
      
      statusValue.textContent = "üí• COLIS√ÉO!";
      statusValue.style.color = "var(--danger)";
      collisionWarning.textContent = "üí• COLIS√ÉO DETECTADA!";
      collisionWarning.className = "danger";
      collisionWarning.style.display = "block";
    }

    // Calcular for√ßa gravitacional
    function calculateGravitationalForce() {
      // Converter dist√¢ncia para metros
      const distanceMeters = distance * 1000;
      
      // Calcular for√ßa
      const force = G * body1.mass * body2.mass / (distanceMeters * distanceMeters);
      
      return { force, distanceMeters };
    }

    // Atualizar informa√ß√µes na tela
    function updateInfo(force, distanceMeters) {
      forceValue.textContent = force.toExponential(2) + ' N';
      distanceValue.textContent = (distanceMeters / 1000).toLocaleString('pt-BR') + ' km';
    }

    // Renderizar cena
    function render() {
      // Limpar canvas
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // Desenhar fundo estrelado
      drawStars();
      
      // Verificar colis√£o
      const collision = checkCollision();
      
      if (collision && !explosion) {
        startExplosion();
      }
      
      // Se houver explos√£o, renderizar explos√£o
      if (explosion) {
        renderExplosion();
      } else {
        // Calcular for√ßa gravitacional
        const { force, distanceMeters } = calculateGravitationalForce();
        
        // Atualizar informa√ß√µes
        updateInfo(force, distanceMeters);
        
        // Desenhar linha de conex√£o
        drawConnectionLine();
        
        // Desenhar vetor de for√ßa se ativado
        if (showForceVector.checked) {
          drawForceVectors();
        }
        
        // Desenhar corpos
        drawBody(body1);
        drawBody(body2);
        
        // Animar for√ßa se ativado
        if (animateForce.checked) {
          forceAnimation = (forceAnimation + 0.05) % (2 * Math.PI);
        }
      }
    }

    // Renderizar explos√£o
    function renderExplosion() {
      explosionProgress += 0.02;
      
      // Atualizar part√≠culas
      explosion.particles.forEach(p => {
        p.x += p.vx;
        p.y += p.vy;
        p.life -= p.decay;
        p.size *= 0.98;
      });
      
      // Filtrar part√≠culas que ainda est√£o vivas
      explosion.particles = explosion.particles.filter(p => p.life > 0);
      
      // Desenhar part√≠culas
      explosion.particles.forEach(p => {
        ctx.globalAlpha = p.life;
        ctx.fillStyle = p.color;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
        ctx.fill();
      });
      
      ctx.globalAlpha = 1;
      
      // Desenhar onda de explos√£o
      explosion.radius = explosionProgress * explosion.maxRadius;
      ctx.strokeStyle = `rgba(255, 100, 0, ${1 - explosionProgress})`;
      ctx.lineWidth = 5;
      ctx.beginPath();
      ctx.arc(explosion.x, explosion.y, explosion.radius, 0, Math.PI * 2);
      ctx.stroke();
      
      // Reiniciar ap√≥s a explos√£o terminar
      if (explosionProgress > 1) {
        explosionProgress = 0;
        explosion = null;
        initializeBodies();
      }
    }

    // Desenhar estrelas de fundo
    function drawStars() {
      ctx.fillStyle = 'white';
      for (let i = 0; i < 100; i++) {
        const x = Math.random() * canvas.width;
        const y = Math.random() * canvas.height;
        const radius = Math.random() * 1.5;
        ctx.beginPath();
        ctx.arc(x, y, radius, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    // Desenhar linha de conex√£o entre os corpos
    function drawConnectionLine() {
      ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
      ctx.setLineDash([5, 5]);
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(body1.x, body1.y);
      ctx.lineTo(body2.x, body2.y);
      ctx.stroke();
      ctx.setLineDash([]);
    }

    // Desenhar vetores de for√ßa
    function drawForceVectors() {
      const forceScale = 1e-20; // Escala para visualiza√ß√£o
      const force = calculateGravitationalForce().force;
      
      // Calcular dire√ß√£o dos vetores
      const dx = body2.x - body1.x;
      const dy = body2.y - body1.y;
      const distancePixels = Math.sqrt(dx * dx + dy * dy);
      const unitX = dx / distancePixels;
      const unitY = dy / distancePixels;
      
      // Efeito de pulso para a anima√ß√£o
      const pulse = animateForce.checked ? 1 + 0.2 * Math.sin(forceAnimation) : 1;
      
      // Vetor no corpo 1 (dire√ß√£o: para o corpo 2)
      ctx.strokeStyle = '#00ff00';
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(body1.x, body1.y);
      ctx.lineTo(
        body1.x + unitX * force * forceScale * pulse, 
        body1.y + unitY * force * forceScale * pulse
      );
      ctx.stroke();
      
      // Cabe√ßa da seta para o corpo 1
      drawArrowHead(
        body1.x + unitX * force * forceScale * pulse,
        body1.y + unitY * force * forceScale * pulse,
        Math.atan2(unitY, unitX)
      );
      
      // Vetor no corpo 2 (dire√ß√£o: para o corpo 1)
      ctx.beginPath();
      ctx.moveTo(body2.x, body2.y);
      ctx.lineTo(
        body2.x - unitX * force * forceScale * pulse, 
        body2.y - unitY * force * forceScale * pulse
      );
      ctx.stroke();
      
      // Cabe√ßa da seta para o corpo 2
      drawArrowHead(
        body2.x - unitX * force * forceScale * pulse,
        body2.y - unitY * force * forceScale * pulse,
        Math.atan2(-unitY, -unitX)
      );
    }

    // Desenhar cabe√ßa de seta
    function drawArrowHead(x, y, angle) {
      const headLength = 15;
      const headWidth = 10;
      
      ctx.save();
      ctx.translate(x, y);
      ctx.rotate(angle);
      
      ctx.beginPath();
      ctx.moveTo(0, 0);
      ctx.lineTo(-headLength, -headWidth);
      ctx.lineTo(-headLength, headWidth);
      ctx.closePath();
      ctx.fillStyle = '#00ff00';
      ctx.fill();
      
      ctx.restore();
    }

    // Desenhar corpo celeste
    function drawBody(body) {
      // Calcular raio visual (proporcional √† raiz c√∫bica da massa)
      const minRadius = 20;
      const maxRadius = 100;
      const visualRadius = Math.max(minRadius, Math.min(maxRadius, Math.cbrt(body.mass) / 1e8));
      
      // Tentar desenhar imagem, se dispon√≠vel
      if (body.image) {
        const img = new Image();
        img.src = body.image;
        img.onload = function() {
          ctx.save();
          ctx.beginPath();
          ctx.arc(body.x, body.y, visualRadius, 0, Math.PI * 2);
          ctx.closePath();
          ctx.clip();
          ctx.drawImage(img, body.x - visualRadius, body.y - visualRadius, visualRadius * 2, visualRadius * 2);
          ctx.restore();
          
          // Desenhar borda
          ctx.beginPath();
          ctx.arc(body.x, body.y, visualRadius, 0, Math.PI * 2);
          ctx.strokeStyle = 'white';
          ctx.lineWidth = 2;
          ctx.stroke();
          
          // Desenhar nome
          ctx.fillStyle = 'white';
          ctx.font = '14px Arial';
          ctx.textAlign = 'center';
          ctx.fillText(body.name, body.x, body.y - visualRadius - 10);
        };
        
        // Fallback: desenhar c√≠rculo colorido se a imagem n√£o carregar
        ctx.fillStyle = body.color;
        ctx.beginPath();
        ctx.arc(body.x, body.y, visualRadius, 0, Math.PI * 2);
        ctx.fill();
      } else {
        // Desenhar c√≠rculo colorido para corpo personalizado
        ctx.fillStyle = body.color;
        ctx.beginPath();
        ctx.arc(body.x, body.y, visualRadius, 0, Math.PI * 2);
        ctx.fill();
      }
      
      // Desenhar borda
      ctx.strokeStyle = 'white';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.arc(body.x, body.y, visualRadius, 0, Math.PI * 2);
      ctx.stroke();
      
      // Desenhar nome
      ctx.fillStyle = 'white';
      ctx.font = '14px Arial';
      ctx.textAlign = 'center';
      ctx.fillText(body.name, body.x, body.y - visualRadius - 10);
    }

    // Loop de anima√ß√£o
    function animate() {
      render();
      animationFrameId = requestAnimationFrame(animate);
    }

    // Inicializar
    function init() {
      // Configurar canvas
      resizeCanvas();
      
      // Inicializar corpos
      initializeBodies();
      
      // Configurar eventos
      setupEventListeners();
      
      // Iniciar anima√ß√£o
      animate();
    }

    // Configurar event listeners
    function setupEventListeners() {
      // Controles de entrada
      distanceInput.addEventListener('input', () => {
        distance = parseFloat(distanceInput.value);
        distanceDisplay.textContent = distance.toLocaleString('pt-BR') + ' km';
        initializeBodies();
      });
      
      // Sele√ß√£o de corpos celestes
      document.querySelectorAll('.body-card').forEach(card => {
        card.addEventListener('click', () => {
          const bodyType = card.getAttribute('data-body');
          const target = card.getAttribute('data-target');
          
          // Atualizar sele√ß√£o visual
          document.querySelectorAll(`.body-card[data-target="${target}"]`).forEach(c => {
            c.classList.remove('selected');
          });
          card.classList.add('selected');
          
          // Atualizar corpo selecionado
          if (target === '1') {
            selectedBody1 = bodyType;
            // Mostrar/ocultar controles personalizados
            customControls1.style.display = bodyType === 'custom' ? 'block' : 'none';
          } else {
            selectedBody2 = bodyType;
            // Mostrar/ocultar controles personalizados
            customControls2.style.display = bodyType === 'custom' ? 'block' : 'none';
          }
          
          // Reinicializar simula√ß√£o
          initializeBodies();
        });
      });
      
      // Controles de massa personalizada
      customMass1.addEventListener('input', () => {
        if (selectedBody1 === 'custom') {
          initializeBodies();
        }
      });
      
      customMass2.addEventListener('input', () => {
        if (selectedBody2 === 'custom') {
          initializeBodies();
        }
      });
      
      // Redimensionamento da janela
      window.addEventListener('resize', resizeCanvas);
    }

    // Redimensionar canvas
    function resizeCanvas() {
      const container = canvas.parentElement;
      canvas.width = container.clientWidth;
      canvas.height = 500;
      
      // Reinicializar corpos
      initializeBodies();
    }

    // Iniciar aplica√ß√£o
    init();
  </script>
</body>
</html>